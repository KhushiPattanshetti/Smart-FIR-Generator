{% extends "base.html" %}

{% block content %}
<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="mb-0" style="color: #0a1f44; font-weight: 600;">
        <i class="bi bi-scale me-2" style="color: #5e0b15;"></i>Register New FIR
      </h2>
      <p class="mb-0 text-muted">File a First Information Report with the Indian Police</p>
    </div>
    <div class="badge" style="background-color: #5e0b15; color: ivory; font-weight: 500;">
      <i class="bi bi-shield-lock me-1"></i> Secure Submission
    </div>
  </div>
  
  <div class="card border-0 shadow-sm" style="border-radius: 12px; background-color: #f8f7f3;">
    <div class="card-header py-3" style="background: linear-gradient(135deg, #0a1f44 0%, #5e0b15 100%); color: ivory; border-radius: 12px 12px 0 0 !important;">
      <div class="d-flex align-items-center">
        <i class="bi bi-file-earmark-text me-2 fs-4"></i>
        <h5 class="mb-0" style="font-weight: 500;">Complaint Details</h5>
      </div>
    </div>
    <div class="card-body">
      <form method="post">
        {% csrf_token %}
        
        <div class="alert alert-info" role="alert">
          <i class="bi bi-info-circle-fill me-2"></i> Fields marked with <span class="text-danger">*</span> are mandatory
        </div>
        
        <h6 class="mt-4 mb-3 fw-bold" style="color: #5e0b15;">
          <i class="bi bi-person-badge me-2"></i>Complainant Information
        </h6>
        
        <div class="row g-3 mb-4">
          <div class="col-md-6">
            <label for="complainant_name" class="form-label fw-medium" style="color: #0a1f44;">
              Full Name <span class="text-danger">*</span>
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-person"></i></span>
              <input type="text" class="form-control" id="complainant_name" name="complainant_name" placeholder="Enter full name as per ID proof" required>
            </div>
            <div class="form-text">Please enter your full legal name</div>
          </div>
          <div class="col-md-6">
            <label for="complainant_contact" class="form-label fw-medium" style="color: #0a1f44;">
              Contact Number <span class="text-danger">*</span>
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-telephone"></i></span>
              <input type="text" class="form-control" id="complainant_contact" name="complainant_contact" placeholder="Enter 10-digit mobile number" required>
            </div>
          </div>
        </div>
        
        <h6 class="mt-5 mb-3 fw-bold" style="color: #5e0b15;">
          <i class="bi bi-calendar-event me-2"></i>Incident Details
        </h6>
        
        <div class="row g-3 mb-4">
          <div class="col-md-6">
            <label for="incident_date" class="form-label fw-medium" style="color: #0a1f44;">
              Date & Time <span class="text-danger">*</span>
            </label>
            <div class="row g-2">
              <div class="col-md-6">
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-calendar"></i></span>
                  <input type="date" class="form-control" id="incident_date" name="incident_date" required>
                </div>
              </div>
            </div>
            <div class="form-text">When did the incident occur?</div>
          </div>
          <div class="col-md-6">
            <label for="incident_location" class="form-label fw-medium" style="color: #0a1f44;">
              Location <span class="text-danger">*</span>
            </label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-geo-alt"></i></span>
              <input type="text" class="form-control" id="incident_location" name="incident_location" placeholder="Enter precise location with landmark" required>
            </div>
          </div>
        </div>
        
        <div class="mb-4">
          <label for="incident_description" class="form-label fw-medium" style="color: #0a1f44;">
            Detailed Description <span class="text-danger">*</span>
          </label>
          <textarea class="form-control" id="incident_description" name="incident_description" rows="6" placeholder="Provide detailed description" required></textarea>
          <div class="form-text mt-2">
            <i class="bi bi-lightbulb"></i> Tip: Be factual and chronological. Include all relevant details.
          </div>
        </div>
        
        <div class="mb-4">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="declaration" required>
            <label class="form-check-label" for="declaration">
              I declare that the information provided is true to the best of my knowledge and belief. I understand that false reporting is punishable under <strong>Section 177, 182 IPC</strong>.
            </label>
          </div>
        </div>
      
        <div class="d-flex justify-content-between mt-5">
          <a href="{% url 'officer_fir_list' %}" class="btn btn-outline-secondary px-4">
            <i class="bi bi-arrow-left-circle me-1"></i> Back to Cases
          </a>
          <div>
            <button type="reset" class="btn btn-outline-danger me-2 px-4">
              <i class="bi bi-eraser me-1"></i> Clear Form
            </button>
            <button type="submit" class="btn px-4" style="background: linear-gradient(135deg, #0a1f44 0%, #5e0b15 100%); color: ivory;">
              <i class="bi bi-file-earmark-check me-1"></i> Submit FIR
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
  
  <div class="mt-4 text-center" style="color: #6c757d; font-size: 0.9rem;">
    <i class="bi bi-shield-check me-1"></i> Your information is secured under the Digital India Act
  </div>
</div>

<style>
  body {
    background-color: #f8f7f3;
  }
  
  .card {
    border: 1px solid rgba(10, 31, 68, 0.1);
    box-shadow: 0 4px 12px rgba(10, 31, 68, 0.08);
  }
  
  .form-control, .form-select, .input-group-text {
    border-color: #ced4da;
    transition: all 0.3s;
  }
  
  .form-control:focus, .form-select:focus {
    border-color: #5e0b15;
    box-shadow: 0 0 0 0.25rem rgba(94, 11, 21, 0.1);
  }
  
  .input-group-text {
    background-color: #f8f9fa;
    color: #5e0b15;
  }
  
  textarea.form-control {
    min-height: 150px;
    background-color: #fff;
  }
  
  .btn-outline-secondary {
    border-color: #0a1f44;
    color: #0a1f44;
  }
  
  .btn-outline-secondary:hover {
    background-color: #0a1f44;
    color: white;
  }
  
  .form-check-input:checked {
    background-color: #5e0b15;
    border-color: #5e0b15;
  }
  
  .alert-info {
    background-color: #e9f5ff;
    border-color: #b8d9f8;
    color: #0a1f44;
  }
  
  @media (max-width: 768px) {
    .d-flex.justify-content-between {
      flex-direction: column;
      gap: 1rem;
    }
    
    .d-flex.justify-content-between > div {
      width: 100%;
    }
    
    .btn {
      width: 100%;
      margin-bottom: 0.5rem;
    }
  }
</style>

<script>
  // Simple client-side validation for mobile number
  document.getElementById('complainant_contact').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '').substring(0, 10);
  });
  
  // Aadhaar number formatting
  document.getElementById('complainant_aadhaar').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '').substring(0, 12);
  });
</script>
{% endblock %}